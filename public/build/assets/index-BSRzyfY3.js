import{r as h,j as e,Q as j,t as d,S as u}from"./app-CheLNs52.js";import{B as t}from"./createLucideIcon-A5zjuJ3J.js";import{C as f,c as b}from"./card-D7EQG4Ep.js";import{T as p,a as N,b as c,c as i,d as g,e as r,S as y,f as v}from"./table-DJktiaSk.js";import{A as w}from"./app-layout-SeCL9wtp.js";import{A as U}from"./arrow-left-CvKFrCW3.js";import{P as A}from"./plus-Bm6Zi4S1.js";import"./index-DT2grXcd.js";import"./index-DBlylh7m.js";import"./index-DQljZEr3.js";import"./index-BzqazHM4.js";import"./app-logo-icon-DtgXgSCa.js";const S=[{title:"Dashboard",href:"/dashboard"},{title:"Users",href:"/admin/users"}];function Q({users:m,flash:a}){const[l,o]=h.useState(Array.isArray(m)?m:[]),x=async s=>{if(confirm("Are you sure you want to delete this user?"))try{await u.delete(`/admin/users/${s}`,{onSuccess:()=>{alert("User deleted successfully!"),o(l.filter(n=>n.id!==s))},onError:()=>alert("Error deleting user")})}catch(n){console.error("Error deleting user:",n),alert("Error deleting user")}};return e.jsxs(w,{breadcrumbs:S,children:[e.jsx(j,{title:"User Management"}),e.jsxs("div",{className:"container mx-auto p-4 max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage users in the MUST system"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(d,{href:"/dashboard",children:e.jsxs(t,{variant:"outline",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})})})]}),a.success&&e.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-700 rounded-md",children:a.success}),a.error&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded-md",children:a.error}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"All Users"}),e.jsx(d,{href:"/admin/users/create",children:e.jsxs(t,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Add New User"]})})]}),e.jsx(f,{children:e.jsx(b,{className:"p-0",children:e.jsxs(p,{children:[e.jsx(N,{children:e.jsxs(c,{children:[e.jsx(i,{children:"Name"}),e.jsx(i,{children:"Email"}),e.jsx(i,{children:"Role"}),e.jsx(i,{className:"text-right",children:"Actions"})]})}),e.jsx(g,{children:l.length===0?e.jsx(c,{children:e.jsx(r,{colSpan:4,className:"text-center text-gray-600",children:"No users available."})}):l.map(s=>e.jsxs(c,{children:[e.jsx(r,{className:"font-medium",children:s.name}),e.jsx(r,{children:s.email}),e.jsx(r,{children:s.role}),e.jsx(r,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(d,{href:`/admin/users/edit/${s.id}`,children:e.jsx(t,{variant:"outline",size:"sm",children:e.jsx(y,{className:"h-4 w-4"})})}),e.jsx(t,{variant:"outline",size:"sm",onClick:()=>x(s.id),disabled:s.role==="admin",children:e.jsx(v,{className:"h-4 w-4 text-red-600"})})]})})]},s.id))})]})})})]})]})}export{Q as default};
